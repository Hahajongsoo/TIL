- Ansible 플레이북 작성 시 하나의 매우 큰 파일에 플레이 및 작업을 작성할 수 있다.
- 단일 플레이북의 복잡한 작업을 다른 파일로 나누어 작업 집합으로 구성할 수 있다.
- 더 작고 분산된 아티팩트를 통해 변수, 작업 및 플레이를 여러 플레이북에서 재사용 가능
- 재사용 가능한 아티팩트:
	- 변수 파일
	- 작업 파일
	- 플레이북 파일
	- 역할
# 변수 재사용
## 플레이북에서 변수 재사용
- 플레이북에서 vars_files 키워드 및 include_vars 모듈을 사용하여 외부 변수 파일을 가져올 수 있다.
- vars_files 키워드
	- 플레이 안에서 변수 파일을 불러와서 참조한다.
- include_vars 모듈
	- tasks 영역에서 변수 파일을 불러와서 참조한다. 

## 인벤토리/플레이북 디렉토리에서 변수 재사용
- Ansible Automation Engine 은 인벤토리 또는 플레이북 파일이 있는 디렉토리에서 group_vars 또는 host_vars 디렉토리의 YAML 형식의 변수 파일을 가져올 수 있다.
- 별도로 플레이북 키워드나 모듈을 사용하지 않아도 Ansible Automation Engine이 group_vars 또는 host_vars 디렉토리가 있으면 읽어들인다. 

# 작업 재사용
- 플레이북, 플레이, 작업 일부, 변수를 재사용하기 위해 include_\* 및 import_\* 모듈을 사용할 수 있다.
-  include_\*  모듈
	-  include_\*  모듈의 주요 용도는 반복문에서 사용하는 것이다.
	-  include_\*  모듈과 반복문을 함께 사용하면 포함된 작업이 루프의 각  항목에 대해 한 번씩 실행된다. 
-  import_\* 모듈
	-  import_\* 관련 모듈은 플레이북, 역할, 작업을 가져올 수 있으며 정적으로 플레이북에 추가
	-  import_\*에 의해 가져온 작업은 사전 처리되어 정적으로 추가되기 때문에 이전 작업의 결과에 영향을 받지 않는다. 

## include vs import

| 항목                   | include                     | import                         |
| ---------------------- | --------------------------- | ------------------------------ |
| 재사용 형식            | 동적                        | 정적                           |
| 처리 시점              | 모듈 실행 시                | 플레이북 파싱 시 전처리        |
| 작업 옵션              | 작업 자체를 포함하는 경우만 | 모든 가져오기 모듈에 적용 가능 |
| 반복문에서 호출        | 사용 가능                   | 사용 불가능                    |
| 태그 및 작업목록 확인  | X                           | O                              |
| 핸들러 알림            | 파일 내의 작업 이름 호출 X  | 파일 내의 작업 이름 호출 O     |
| 작업 시작              | X                           | O                              |
| 플레이북 전체 가져오기 | X                           | O                              |
| 변수 파일 가져오기     | O                           | X                              | 

- 작업 옵션: 플레이북 작업 관련 키워드 사용 가능 여부
	- include: include_tasks 모듈에서만 사용 가능
	- import: 모든 import_* 모듈에서 사용 가능
