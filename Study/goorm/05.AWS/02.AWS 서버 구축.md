# 서버와 스토리지
## 서버
- 특화된 임무를 수행하기 위해 설계된 컴퓨터
- 성능이 낮은 시스템도 서버로 사용할 수 있음
- 보통 일반 컴퓨터보다도 고성능/고용량/고가용성이 요구됨

## 스토리지
- 데이터를 저장/사용/검색/삭제할 수 있는 공간
- 물리적인 동작 방식에 따라 분류
	- 자기 디스크 기반의 하드디스크
	- 메모리 기반의 SSD
- 스토리지의 성능 및 안정성 확보하귀 위하여 RAID 등을 사용

# 보안과 방화벽
## 보안
- 안전한 상태를 지키는 것
- 각종 위험으로부터 정보 및 데이터를 보호
- AWS 내의 다양한 보안 관련 서비스
	- AWS IAM: 리소스에 대한 사용자 액세스 및 암호화 키 관리
	- AWS GuardDuty: 관리형 위험 탐지 서비스
	- AWS Shield: DDoS 보호
	- AWS WAF: 악성 웹 트래픽 필터링, Web application Firewall

## 방화벽
- 외부 네트워크에 연결된 포인트에서 내부 내트워크로의 불법적인 침입을 보호
- 기본적인 침입 차단 및 침투 지연 효과
- AWS의 기본적인 방화벽 서비스: Amazone Security Group

# AWS 기본 용어
클라우드 서비스를 위한 인프라 환경을 크게 리전, 가용영역, 엣지 로케이션으로 구분할 수 있따.
## 리전(Region)
- 전세계에 물리적으로 분리되어 구축된 AWS 서비스 지역의 분류
- 가장 가까운 위치의 리전을 사용하여 빠른 속도로 서비스 이용
- 필요에 따라 다른 리전을 선택 가능
- 리전 별로 가능한 서비스가 다를 수 있음

## 가용영역(Availability Zone)
- 우리가 흔히 알고 있는 데이터 센터를 말한다.
- 하나의 리전에 다수의 가용영역을 보유하고 있다. 
- 같은 리전이라도 지리적으로 멀리 떨어져있다.

## 엣지 로케이션(Edge Location)
- CDN을 위한 캐시서버들의 모음
- AWS CloudFront를 위해 사용됨
- CDN(Content Delivery Network)는 정적 콘텐츠를 서버와 사용자들이 빠르게 받을 수 있도록 전세계 곳곳에 위치한 캐시서버에 복제해주는 서비스이다. 

# Amazon EC2
## Amazon EC2
- EC2는 AWS 상에서 안정적이며, 크기를 조정 가능한 컴퓨팅 파워를 제공하는 웹 서비스이다.
- 가상화 서버를 인스턴스라고 부른다.
- 서버를 구성하는 일반적인 절차 예시
![](images/Pasted%20image%2020230125110724.png)

| 구분      | 내용                                                                                                                                                                                                                                                                                      |
| --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 서비스 명 | Amazon EC2                                                                                                                                                                                                                                                                                |
| 설명      | 클라우드에서 제공되는 크기를 조정할 수 있는 컴퓨팅 파워                                                                                                                                                                                                                                   |
| 주요 특징 | - 한 개에서 수천 개의 인스턴스로 확장 가능 <br>- 모든 공개된 AWS Region에서 사용가능<br>- 필요에 따라 인스턴스의 생성, 시작, 수정, 중단, 삭제 가능<br>- 모든 소프트웨어 설치 가능<br>- 사용한 사용량에 대해서만 시간 단위 비용 과금<br>- 다양한 비용 모델(온디맨드, 스팟, 예약) 선택 가능 |
| 프리티어  | - Linux/Windows t2.micro 인스턴스 월 750시간 제공<br>- 가입 후 12개월 이후에 종료됨                                                                                                                                                                                                                                                                                          |

## 주요 특징
### 인스턴스 유형
인스턴스의 유형은 크게 범용(M시리즈), 컴퓨팅 최적화(C 시리즈), 스토리지 최적화(I 시리즈, D 시리즈), GPU 최적화(G 시리즈), 메모레 최적화(R 시리즈)로 나눌 수 있다.

### 구매 옵션
- 온디맨드 필요시 바로 생성하여 사용 초 단위 과금
- 예약: 기간에 대한 약정을 통해 온디맨드보다 최대 75% 저렴한 비용을 지불한다.
- 스팟: 경매 방식의 인스턴스로 높은 가격을 입력한 사용자에게 인스턴스가 할당된다.
- 전용: 고객 전용의 하드웨어에서 인스턴스 서비스를 제공한다.

## EBS(Elastic Block Storage)
서버용 하드디스크라고 생각하면 된다.

| 구분      | 내용                                                                                                                                                                                                                                                                                                                                                      |
| --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 서비스명  | Amazon EBS                                                                                                                                                                                                                                                                                                                                                |
| 설명      | EC2 인스턴스용 영구 블록 수준의 스토리지 볼륨으로 안정적이고 지연 시간이 짧음                                                                                                                                                                                                                                                                             |
| 주요 특징 | - 크기는 1GB 단위로 1GB~1TB까지 선택 가능<br>- 크기/사용 기간을 기준으로 비용 과금<br>- 마그네틱의 경우 발생하는 I/O횟수에도 비용 과금<br>- EC2 인스턴스와 독립적으로 사용 가능하며, 다른 EC2 인스턴스에 교체 가능<br>- 데이터는 영구적으로 저장되며, 원하는 가용영역에 생성 가능<br>- 백업된 스냅샷에서 EBS 볼륨을 생성/복원 가능(다른 AZ에도 생성 가능) |
| 프리티어  | - 30GB 범용(SSD) 또는 마그네틱을 원하는 대로 조합<br>- 2백만 I/O(EBS 마그네틱)<br>- 1GB 스냅샷 스토리지<br>- 가입 후 12개월 이후에 종료됨                                                                                                                                                                                                                                                                                                                                                          |

## EBS 주요 특징
### 볼륨 유형

| 볼륨 유형         | 범용 SSD                      | 프로비저닝된 IOPS              | 처리량 최적화                      | 콜드 HDD                    | 마그네틱                    |
| ----------------- | ----------------------------- | ------------------------------ | ---------------------------------- | --------------------------- | --------------------------- |
| 설명              | 다양한 트랜잭션 워크로드 처리 | 지연 시간에 민감한 고성능 처리 | 자주 액세스 하며 처리량 집약적 HDD | 액세스 빈도 낮은 저비용 HDD | 빈도가 낮으며 성능 낮은 HDD |
| 사례              | 부트 볼륨                     | I/O 집약적인 NoSQL, RDBMS      | 빅데이터, 로그 처리                | 일별 스캔 횟수 작업 데이터  | 드문 데이터 엑세스          |
| API이름           | gp2                           | io1                            | st1                                | sc1                         | standard                    |
| 볼륨 크기         | 1GB ~ 16TB                    | 4GB ~ 16GB                     | 500GB ~ 16TB                       | 500GB ~ 16TB                | 1GB ~ 1TB                   |
| 최대 IOPS         | 10000                         | 32000                          | 500                                | 250                         | 200                         |
| 최대 처리량(MB/s) | 160                           | 500                            | 500                                | 250                         | 4~90                            |

### EBS 스냅샷
- EBS 볼륨의 데이터를 스냅샷으로 만들어 S3에 백업 및 보관할 수 있는 기능
- 스냅샷으로 다시 EBS 볼륨을 생성하거나 다른 EC2로 연결하여 복원 작업 수행 가능
- 스냅샷 진행 과정 중에도 EBS나 EC2의 서비스 중단 없이 기존 서비스 사용 가능
- EBS 볼륨의 크기 조정에 사용될 수 있다.
- 공유 기능을 활용하여 권한이 있는 다른 사용자에게 공유
- 다른 리전으로 복사 가능, 원하는 리전으로의 지리적 확장이나, 데이터 센터 마이그레이션 및 재해복구 손쉽게 수행

### EBS 성능과 보안성 높이기
- 프로비저닝된 IOPS: EBS 성능을 높이기 위해 디스크의 IOPS 성능을 지정할 수 있는 기능. 보다 높은 I/O 성능을 제공하여 고성능의 서비스 제공에 적합함
- EBS 최적화된 인스턴스: EBS의 디스크 서비스를 위한 전용 네트워크의 대역폭을 사용하도록 구성하여 디스크 성능을 최적화하는 기능. EC2 C, M R 시리즈에서 추가 비용 없이 사용 가능
- EBS 암호화: 암호화 알고리즘 중 하나인 AES-256으로 암호화하여 EBS 내부의 데이터를 보호. 이렇게 암호화된 EBS 스냅샷은 공유 및 다 AWS 계정에 공유되어도 사용 불가

# Amazon Sequrity Group
## Amazon 보안 그룹
- 인스턴스에 대한 인바운드 아웃바운드의 네트워크 트래픽을 제어하는 가상의 방화벽 역할
- 각 인스턴스당 최대 5개의 보안 그룹 할당 가능
- 네트워크 트래픽에 대한 허용(Allow)만 가능하며 차단(Deny)은 설정 불가
	- 보안 그룹이 EC2 인스턴스 수준에 적용되기 때문에 적용되는 룰로, 차단 기능을 적용하기 위해서는 VPC의 기능중 하나인 네트워크 ACL을 통해 서브넷 수준에서 네트워크의 흐름을 제어할 수 있다.

## 주요 특징
- 생성 가능한 보안 그룹의 숫자와 규칙에 제한이 있다. 하나의 VPC 당 생성할 수 있는 보안 그룹의 개수는 기본 한도 500개. 각 보안 그룹당 추가할 수 있는 규칙의 개수는 50개, 네트워크 인터페이스 당 5개의 보안 그룹 적용 가능
- 허용 정책은 있으나 차단 정책은 없다.
- 인바운드 트래픽과 아웃바운드 트래픽을 별도로 제어할 수 있다.

# EC2 서버 만들기
## Windows 서버용 EC2 서버 만들기

1. EC2 -> 인스턴스 -> 인스턴스 시작
2. 어플리케이션 및 OS 이미지(Amazon Machine Image) 에서 OS 이미지 선택
3. 인스턴스 유형에서 인스턴스 유형 선택
4. 접속에 사용할 key pair 선택, 없는 경우 Create new key pair를 통해서 생성
5. 네트워크 설정 -> 편집 을 이용하여 다르게 설정할 수 있다.
	- 보안 그룹 생성
	- windows의 경우 보안 그룹 규칙에 rdp 유형이 지정되어 있다.
6. 스토리지 구성에서 스토리지 유형 선택
7. 인스턴스 시작

### 서버 연결
1. 접속하려는 인스턴스 클릭하여 나오는 인스턴스 요약에서 연결 선택 
2. RDP 클라이언트 이용하여 연결
3. 암호 가져오기에 프라이빗 키 등록 -> 암호 해독
4. 원격 데스크톱 파일 다운로드를 통해 파일 실행
	- 내용을 확인해보면 설정, 주소, 유저등의 내용이 담겨있다.
	- 윈도우즈의 `원격 데스크톱 연결` 을 통해서도 연결할 수 있다.
5. power의 disconnect 를 사용해 연결 종료

## Linux 서버용 EC2 서버 만들기
1. Amazon Linux 사용(레드햇 계열과 비슷)
2. 초기 보안그룹에서 설정하지 않아도 나중에 보안그룹을 편집하여 원하는 규칙을 추가/제거할 수 있다.

### 서버 연결
1. amazon linux의 경우 유저명은 ec2-user이다.