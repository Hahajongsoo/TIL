#CS #datastructure

Array와 Linked List는 가장 기본적인 자료구조이다. 모든 자료구조의 기본 자료구조로 모든 자료구조는 Array나 Linked List에서 시작한다.

# Array
fixed size array를 의미한다. 배열이라고 한다. 만약 다음과 같이 변수를 선언한다라고 해보자.
```go
var a [100]int
```
이 경우 int의 경우는 64bit 이므로 8byte 공간이 100개가 필요하여 800bytes 의 공간을 할당하게 된다. 이때 array는 연속된 메모리 블록이다.
- 연속 메모리이기 때문에 한꺼번에 할당되고 한꺼번에 해제된다. 메모리가 낭비될 수도 있다.
- Random Access 에 강하다. 
	- 해당 인덱스로 접근하려면 해당 메모리 주소에 접근해야한다. Array의 경우 시작 주소와 요소의 TypeSize로 요소의 메모리 주소를 계산하기 쉽다.(시작 주소 + Index x TypeSize) O(1)
- 삽입과 삭제에 약하다. 
	- array 중간에 값을 넣거나 삭제하는 경우 모든 값을 밀어주거나 당겨주는 형태를 취해야한다. 기존에 존재하는 array에서 요소의 값들을 각각 복사해야하기 때문에 O(N)이 걸리게 된다.

- Cache miss가 잘 일어나지 않는다.
	- 메모리에서 캐시로 가져올 때 필요한 데이터 근방의 데이터들을 같이 가져오게 된다. 그 다음 연산에서 필요한 데이터가 캐시에 있다면 이를 cache hit 이라고 하고 캐시에 없는 경우를 cache miss라고 한다.
	- array는 연속적인 메모리이고 캐시는 해당 데이터 주변 데이터까지 메모리에서 가져오기 때문
- 요소가 사라질 때 마다 GC 되지 않는다. 
	- array는 한 꺼번에 만들어지고 한 꺼번에 사라지기 때문이다. 
	- GC가 많아지면 속도가 느려지기 마련이다. GC는 크기보다는 개수에 영향을 더 많이 받게 된다.  

# Linked List
포인터로 연결한 노드들로 구성된다. 한 번에 하나의 노드가 할당되기 때문에 불연속적인 메모리 공간을 갖게 된다. node와 edge로 이루어져 있기 때문에 Graph의 일종이다. linked list는 edge가 하나이다. 
single linked list와 double linked list가 있고 single linked list는 단방향 double linked list는 양방향이다.
- 불면속 메모리이기 때문에 그때마다 필요한 만큼 메모리를 사용한다.
- 삽입, 삭제에 효율적이다. O(1)
	- 물론 중간 노드를 순회하는 데에는 O(N)이 걸리게 된다. 그러나 보통 링크드리스트를 쓸 때는 노드를 따로 저장해서 가지고 있다가 추가하는 경우를 가정한다. (이렇게 쓰는 경우가 아니면 링크드 리스트를 쓸 이유가 없기 때문이라고 함)
- Random Access에 약하다. 조회시에 노드를 일일이 조회해야하기 때문에 O(N)이다. 
- Cache Miss가 잘 일어난다.
- 요소가 사라질 때 GC가 일어난다. 


결론은 대부분 Array를 사용한다.
단 요소 수가 많고 맨 앞에서 삽입/삭제가 빈번한 큐는 Linked List 사용 고려 (예를 들어 대기열) 
벤치마크로 비교 후에 링크드리스트가 성능이 좋으면 그 때 사용하는 것이 좋다.

멀티쓰레드 환경에서 Lockfree queue 등도 고려