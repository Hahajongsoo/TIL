#fastcampus #CS

# 네트워크 정의와 역사

## 네트워크란?
- 컴퓨터나 태플릿 스마트폰, 노트북 등이 연결되는 것
- 분산되어 있는 컴퓨터들이 자원을 공유할 수 있게 통신망으로 연결한 것

## 네트워크 형태
- LAN(Local Area Network) 근거리 통신망
	- 사무실 또는 학교 등의 가까운 지역을 한데 묶은 네트워크
- WAN(Wide Area Network) 장거리 통신망
	- 각각 떨어진 LAN 망을 연결, 규모가 큰 네트워크, ISP로 연결
논리적으로
- VPN(Virtual Private Network) 가상 사설망
	- 공중망을 사설망처럼 사용, 암호화

# 네트워크 구조
## 네트워크 구분
- 규모
	- 회사나 학교등의 집단 크기에 따라 구분 - 사용자, 대역폭
	- pc 혹은 서버, pc가 몇 대인가 pc당 데이터 양이 얼마나 되는가.
	- 규모에 따라 네트워크 구조가 달라질 수 있다.
- 업종
	- 공공기관, 제조, 금융, 게임 등의 업종에 따른 서비스 중요도
	- 서비스에 따라서 네트워크 구조는 변경이 된다.
- 통신 방식과 경로
	- server & client: 서비스를 제공하는 자와 서비스를 이용하는 자의 통신, 통신을 주고 받는다. 대부분의 인터넷 통신이 여기에 속한다. 
	- peer to peer: 개인과 개인의 통신, PC 대 PC의 통신. 
- 토폴로지
	- star: 끝에 PC와 중앙에 중계기, 중계기를 거쳐서 통신
	- ring: PC끼리 링으로 연결, 멀리있는 PC의 경우 느려진다.
	- mesh: PC끼리 직접 연결
	- bus: line bus를 통해 통신 
	- tree: 물리적인 네트워크 구성으로 가장 많이 사용하는 구성이다. 계층적 구성이다.
	- redundancy: 가용성, 한 대의 서버가 아니라 여러대의 서버를 둬서 서버 장애에 대응한다. 단지 네트워크 뿐만 아니라 유틸리티도 구성

### 홈 네트워크
- 가장 작은 구조
- 인터넷 - ISP - 모뎀 - 공유기 - 컴퓨터
- 외부 인터넷에 접속하기 위해서는 ISP가 필요하다.
- ISP에 인터넷을 신청하면 ISP는 모뎀을 설치, 모뎀과 컴퓨터가 연결이 되면 컴퓨터는 통신을 할 수 있게 된다.
- 모뎀은 기본적으로 기기 한 대만 이용할 수 있으므로 공유기를 사용해 여러 대를 사용할 수 있게 한다.

### 기업용 네트워크
- 인터넷 - ISP - 라우터 - 방화벽 - L4 LB - 서버
											   - L3 백본 - L2 스위치
- ISP는 기업용 회선인 전용선이라는 서비스가 있다. 안전, 안정을 보장받는다.
	- 다양한 서버를 유지해야 하므로 더 많은 IP를 할당받게 된다.
- 라우터는 외부의 컴퓨터들과 통신을 처리해주는 장비
- 방화벽은 외부의 침입을 막아준다. 최근에는 라우터의 역할을 방화벽이 해주기도 한다.
- 외부에 공개되어야 하는 서버의 경우, 다량의 사용자가 접근을 하므로 서버가 버틸 수 있도록 앞단에 부하를 분산시켜주는 로드밸런서를 위치시킨다. 

### 클라우드 네트워크 - AWS 기준
- 인터넷 - Route53 - IGW - VPC - ELB - Auto Scaling - Security Group - EC2
- 인터넷에서 특정 주소에 접속하기 위해서는 URL인 스트링을 이용하게 된다. 스트링을 IP로 변환하는 서비스를 DNS라고 하고 aws는 해당 서비스를 route53으로 제공한다.
- 이후 internet gate way로 들어오게 된다. 이는 라우터 역할을 한다.
- VPC는 aws의 큰 네트워크 구조로 L3 ,L2 스위치 라우팅 같은 다양한 네트워크 설계를 하나의 논리적인 망으로 구성하는 것을 말한다. 
- elastic load balancer
- security group은 기존의 방화벽 역할을 해준다.

# OSI 7 Layer
- 네트워크 프로토콜과 통신을 7가지 계층으로 표현한 것이다.
- 프로토콜을 기능별로 나누고 계층 별로 구분한다
- 벤더간 호환성을 위한 표준이 필요함
	- 접근성이 용이해지면서 기술의 발전이 이루어짐

## OSI 7 Layer 모델
| 단계  |                   역할                    |
|:------------:|:---------------------------------------------------------------------:|
| application  |                   응용 서비스 HTTP(웹), SMTP(메일)                    |
| presentation |                        인코딩 / 암호화 / 압축                         |
|   session    | TCP / IP 통신 연결을 수립 / 유지 / 중단 (아래 단계에서의 테이블 관리) |
|  transport   |         TCP / UDP (IP통신 후 어떤 서비스를 하게 되는지, 포트)         |
|   network    |                            IP 통신, 라우팅                            |
|  data link   |       이더넷, 랜카드, Mac 통신(랜카드 간 통신, 에러검출/재전송)       |
|   physical   |                      네트워크 하드웨어 전송기술                       |

### 1계층 : Physical
- 기능 
	- 장치와 통신 매체 사이의 비정형 데이터의 전송을 담당
	- 디지털 bit를 전기, 무선 또는 광 신호로 변환
	- 전송되는 방법, 제어 신호, 기계적 속성 들을 정의
	- 케이블, 인터페이스(기기에 맞는 규격), 허브, 리피터 등이 이에 속함

### 2계층 : Data Link
- 기능
	- 동일 네트워크 내에서 데이터 전송, 링크를 통해서 연결을 성정하고 관리
	- 물리계층에서 발생할 있는 오류를 감지하고 수정
	- IEEE 802에서 정의
	- MAC(media access control) : 각각의 장비들이 통신하기 위한 고유의 일련번호. 이로 식별하고 통신한다.
	- logical link control
- 장비
	- 모뎀
	- 스위치

### 3계층 : Network
- 기능
	- 다른 네트워크로 데이터 정송, IP(Internet Protocol)주소로 통신
	- 출발지 IP에서 목적지 IP로 데이터 통신 시 중간에서 라우팅 처리
	- 데이터가 큰 경우 분할 및 전송 후 목적지에서 재 조립하여 메시지 구현(패킷)
	- IP통신과 라우팅
- 장비
	- L3 스위치, 라우터

### 4계층 : Transport
- 기능
	- 호스트(PC) 간의 데이터(서비스) 전송, IP통신 이후에 서비스에 따라  포트 정의
	- 오류 복구 및 흐름 제어, 완벽한 데이터 전송을 보장
	- TCP/UDP
- 장비
	- L4 계층 부터는 특정 하드웨어로 구분하기가 모호하다. 소프트웨어 레벨이기 때문
	- Port를 제어한다는 의미로 L4 로드 밸런서가 있다.

### 5계층 : Session
- 기능
	- 로컬 및 원격 애플리케이션 간의 IP/Port 연결을 관리
	- Session Table로 관리한다.
	- 예를 들어 netstat으로 확인할 수 있다.
		- 프로토콜(L4 정보), 로컬 주소(출발지 주소, IP:port), 외부 주소(목적지), 세션 상태

### 6계층 : Presentation
- 기능
	- 사용자 프로그램과 네트워크 형식간에 데이터를 변환하여 표현과 독립성을 제공
	- 인코딩, 디코딩, 암호화, 압축
	- ASCII, JPG, MPEG

7계층 : Application
- 기능
	- 사용자와 가장 밀접한 소프트웨어
	- 이메일 서비스 SMTP, 파일전송 FTP 등

# TCP/IP 모델 비교와 캡슐화

## TCP/IP
- 네트워크 프로토콜의 모음으로 패킷 통신 방식인 IP와 전송 조절 프로토콜인 TCP로 이루어져 있다.
- 1990년대 네트워크 표준이 ISO 모델과 TCP/IP 모델로 좁혀짐

## TCP/IP 모델
|       단계        |                       역할                       |
|:-----------------:|:------------------------------------------------:|
|    Application    |      응용프로그램 간 표준화 된 데이터 교환       |
|     Transport     |                    TCP / UDP                     |
|      Network      | 패킷을 처리하고 다른 네트워크로 연결 (IP 라우팅) |
| Network Interface |    물리 계층으로 네트워크 노드들을 상호 연결     |

## TCP/IP 와 OSI 7 Layer 비교
|      TCP/IP       | Servicd & Protocol | OSI 7 Layer  |
|:-----------------:|:------------------:|:------------:|
|                   |                    | application  |
|    Application    |  HTTP, SMTP, DNS   | presentation |
|                   |                    |   session    |
|     Transport     |     TCP / UDP      |  transport   |
|      Network      |   IP, ICMP, OSPF   |   network    |
| Network Interface |      Ethernet      |  data link   |
|                   |                    |   physical   |
- TCP/IP는 4개의 계층으로 OSI 7 Layer는 7개 계층으로 표현이 된다.
- Network Interfacd - data link/physical
- Network - Network : 네트워크를 체크해주는 프로토콜인 ICMP, 라우팅 중 다이나믹한 프로토콜을 처리해주는 OSPF
- trainsport - transport
- Application - Application/presentaion/session 

## 캡슐화
- 인캡슐레이션 : 데이터를 캡슐화하고 헤더를 붙이는 과정 (위에서 아래로)
|              |                           컴퓨터(사용자가 데이터를 다른 컴퓨터와 통신)                            |
|:------------:|:-------------------------------------------------------------------------------------------------:|
| application  |                             Host Data(사람이 직접 보내는 데이터 표현)                             |
| presentation |                                                                                                   |
|   session    |                               Data(컴퓨터가 이해할 수 있는 데이터)                                |
|  transport   |    segment :  TCP header + 이전 Data (어떤 포트를 사용하는지(서비스)에 대한 정보를 추가한다.)     |
|   network    |                    packet : IP header + 이전 Data (목적지 IP에 대한 정보 추가)                    |
|  data link   | frame : MAC LLC header + 이전 Data + FCS (네트워크 장비의 고유번호, 오류 검출을 위한 트레일 추가) |
|   physical   |                                    bit : signal (장비 신호로 변환)                                     |

- 디캡슐레이션 : 반대로 하나씩 떼어네는 과정 (아래에서 위로)
|              |                           컴퓨터(수신)                            |
|:------------:|:-------------------------------------------------------------------------------------------------:|
| application  |                             Host Data(사람이 직접 보내는 데이터 표현)                             |
| presentation |                                                                                                   |
|   session    |                               Data(컴퓨터가 이해할 수 있는 데이터)                                |
|  transport   |    segment :  TCP header + 이전 Data (어떤 포트를 사용하는지(서비스)에 대한 정보를 추가한다.)     |
|   network    |                    packet : IP header + 이전 Data (목적지 IP에 대한 정보 추가)                    |
|  data link   | frame : MAC LLC header + 이전 Data + FCS (네트워크 장비의 고유번호, 오류 검출을 위한 트레일 추가) |
|   physical   |                                  bit : signal (장비 신호로 변환)                                  | 

