# Traffic management
istio의 트래픽 라우팅은 트래픽의 흐름과 서비스간의 API 호출을 쉽게 컨트롤할 수 있게 해준다. istio는 circuit breaker, timeout, retry 같은 서비스 레벨의 속성들을 설정하는 것을 쉽게해주고 A/B 테스팅, canary 배포 그리고 가중치로 트래픽을 나누는 staged 롤아웃과 같은 중요한 작업들을 쉽게 셋업할 수 있게 해준다.  또한 종속 서비스와 네트워크의 오류에 대해 애플리케이션의 복원력을 높이는데 도움이되는 즉시 사용 가능한 신뢰성을 제공한다. 
istio의 traffic management는 서비스와 함께 배포된 envoy proxy에 의존한다. 서비스가 보내고 받는 모든 트래픽은 envoy를 거치게 되고 이를 통해 서비스들이 직접 통신할 수 있게 되고 서비스에서 수정 없이 트래픽 관리를 쉽게 해준다.

# Introducing Istio traffic management
메쉬 안에서 트래픽을 직접 전달하기 위해서 istio는 모든 endpoint가 어디에 있고, 해당 endpoint에 어떤 서비스가 속해있는지 알아야한다. service registry를 채우기 위해서 istio는 서비스 탐색 시스템에 연결한다. 예를들어 istio를 쿠버네티스 클러스터에 설치했다면 istio는 해당 클러스터에 있는 서비스와 엔드포인트들을 탐지한다. 
service registry는 service mesh에서 실행중인 서비스와 그에 상응하는 엔드포인트들의 집합이다. 그리고 istio는 내부적으로 이를 유지한다. 이 service registry를 사용하여 envoy 프록시는 트래픽을 관련있는 서비스에 연결할 수 있다. 대부분의 마이크로서비스 애플리케이션들은 서비스 트래픽을 감당하기 위해서 각각의 서비스 워크로드의 인스턴스를 여러개 가지고 있다. 기본적으로 envoy proxy는 각 서비스의 로드 밸런싱 풀에 라운드 로빈으로 트래픽을 분산시킨다. 
istio의 기본 서비스 탐색과 로드밸런싱이 동작하는 서비스 메쉬를 제공한다고 해도 이는 istio가 할 수 있는 것의 극히 일부이다. 여러 원하는 동작을 하기위해서 사용할 수 있는 CRD들이 있다.

- Virtual service
- Destination rules
- Gateways
- 