웹서비스를 하려면 크게 프론트엔드 코드와 백엔드 코드가 필요하다. 웹 서비스는 화면을 담당하는 프론트엔드와 데이터와 로직을 담당하는 백엔드가 서로 통신하면서 동작하게 된다.

# 준비하기
## `urfave/negroni` 
`urfave/negroni` 패키지는 자주 사용되는 웹 핸들러를 제공하는 패키지이다. negroni를 사용하면 다음과 같은 기능을 이용할 수 있다.
- 로그 기능
	- 웹 요청을 받아 응답할 때 자동으로 로그를 남겨줘서 웹 서버 동작을 확인할 수 있다.
- panic 복구 기능
	- 웹 요청을 수행하다가 panic이 발생하면 자동으로 복구해주는 동작을 지원한다.
- 파일 서버 기능
	- public 폴더의 파일 서버를 자동으로 지원해준다.

```
[user@client1 ch31]$ go get github.com/urfave/negroni
go: downloading github.com/urfave/negroni v1.0.0
```

사용법은 간단하다. 기본 기능인 `negroni.Classic()` 핸들러로 우리가 만든 핸들러를 감싸서 이용하면 된다.

```go
mux := MakeWebHandler() // 1
n := negroni.classic()  // 2
n.UseHandler(mux)       // 3

err := http.ListenAndServd(":3000", n)
```

1. 우리가 만들 웹 서버 핸들러이다. 웹 서버에 필요한 API를 제공하는 핸들러이다.
2. negroni 기본 핸들러이다. `Classic()` 핸들러는 로그, 복구, 파일서버 기능을 지원한다.
3. negroni 기본 핸들러의 `UseHandler()` 메서드로 우리가 만든 웹 서버 핸들러를 감싼다. 그러면 HTTP 요청이 처리되기 전에 로그를 남기고 안쪽의 사용자 핸들러를 호출하게 된다.
	- HTTP 요청 수신 시 negroni에서 제공하는 부가 기능 핸들러들을 수행하고 난 뒤 우리가 등록한 핸들러를 실행하게 된다.

## `unrolled/render`
웹 서버 응답을 구현하는 데 사용하는 유용한 패키지이다. 웹 서버 응답으로 HTML이나 JSON, TEXT 같은 포맷을 간단히 사용할 수 있다.
```
[user@client1 ch31]$ go get github.com/unrolled/render
go: downloading github.com/unrolled/render v1.5.0
go: downloading github.com/fsnotify/fsnotify v1.5.4
go: downloading golang.org/x/sys v0.0.0-20220615213510-4f61da869c0c
```

render 패키지를 이용하면 아래와 같이 한 줄로 간편하게 JSON 포맷으로 변환하여 응답할 수 있다.
```go
r := render.New()
r.JSON(w, http.StatusOK, map[string]string{"hello": :"json"})
```
render 인스턴스가 자동으로 JSON 포맷으로 변환하여 HTTP 응답을 전송하는 것이다.

# 웹 서버 만들기
할 일 목록을 관리하는 사이트를 만들어본다. 버튼 클릭으로 할 일 목록을 추가할 수 있고, 완료 여부 표시, 삭제 등을 할 수 있다.

## RESTful API 정의하기

| 메서드 | URL       | 동작                         |
| ------ | --------- | ---------------------------- |
| GET    | /todos    | 전체 할 일 목록 반환         |
| POST   | /todos    | 새로운 할 일 등록            |
| PUT    | /todos/id | id에 해당하는 할 일 업데이트 |
| DELETE | /todos/id | id에 해당하는 할 일 삭제     | 

## 웹 서버 만들기

```go

```