앞 장에서 HTTP의 기본 네 요소를 설명했다.
- 메서드와 경로
- 헤더
- 바디
- 스테이터스 코드
브라우저가 기본 요소들을 어떻게 응용하고 기본 기능을 실현하는지 살펴본다.
# 1 단순한 폼 전송(x-www-form-urlencoded)
HTTP/1.0의 바디 수신은 클라이언트가 지정한 콘텐츠가 그대로 저장될 뿐이다. 기본적으로 한 번 HTTP가 응답할 때마다 한 파일밖에 반환하지 못하기 때문이다. 즉 응답의 본체를 지정한 바이트 수만큼 읽어오면 그만이다. 
폼을 사용한 `POST` 전송에는 몇 가지 방식이 있다. 가장 단순한 전송 방식은 다음과 같다.
```HTML
<form method="POST">
	<input name="title">
	<input name="author">
	<input name="submit">
</form>
```
일반적인 웹에서 볼 수 있는 폼이며 method에는 `POST`가 설정돼 있다. 다음처럼 curl 커맨드를 사용하면 폼과 같은 형식으로 전송할 수 있다.
```shell
$ curl --http1.0 -d title="The Art of Community" -d author="Jono Bacon" http://localhost:8080
```
curl 커맨드는 `-d`옵션이 지정도미ㅕㄴ 브라우저와 똑같이 헤더로 `Content-Type:application/x-www-form-urlencoded`를 설정한다. 이때 바디는 키와 값이 `=`로 연결되고, 각 항목이 `&`로 연결된 문자열이 된다.
```
title=The Art of Community&author=Jono Bacon
```
실제로는 이 커맨드가 생성하는 바디는 브라우저의 웹 폼에서 전송하는 것과는 약간 차이가 있다. curl에서는 실제 보내는 데이터에 구분문자인 `&`와 `=`가 들어있는 경우 그대로 연결해버린다. 브라우저는 RFC 1866에서 책정한 변환 포맷에 따라 변환을 실시한다. 이 포맷에서는 알파벳, 수치, 별표, 하이픈, 마침표, 언더스코어의 여섯 종류 문자 외에는 변환이 필요하다.
```
title=Head+First+PHP+%26+MySQL&author=Lynn+Beighley%2C+Michael+Morrison
```
curl에는 이와 가까운 기능을 하는 `data-urlencode`가 있다. 이때 RFC 3986에서 정의된 방법으로 변환된다.
웸 폼의 GET의 경우 바디가 아니라 쿼리로서 URL에 부여된다고 RFC 1866에 정의되어 있다.

# 2 폼을 이용한 파일 전송
HTML의 폼에서는 옵션으로 멀티파트 폼 형식이라는 인코딩 타입을 선택할 수 있다. 옵션을 사용해서 파일을 보낼 수 있다. RFC 1867에 정의돼 있다. 
```
<form action="POST" enctype="multipart/form-data">
</form>
```
